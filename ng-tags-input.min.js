/*! ngTagsInput v2.1.1 License: MIT */!function(){"use strict";function t(){var t={};return{on:function(e,n){return e.split(" ").forEach(function(e){t[e]||(t[e]=[]),t[e].push(n)}),this},trigger:function(e,n){return angular.forEach(t[e],function(t){t.call(null,n)}),this}}}function e(t,e){return t=t||[],t.length>0&&!angular.isObject(t[0])&&t.forEach(function(n,a){t[a]={},t[a][e]=n}),t}function n(t,e,n){for(var i=null,o=0;o<t.length;o++)if(a(t[o][n]).toLowerCase()===a(e[n]).toLowerCase()){i=t[o];break}return i}function a(t){return angular.isUndefined(t)||null==t?"":t.toString().trim()}var i={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,comma:188},o=9007199254740991,r=["text","email","url"],s=angular.module("ngTagsInput",[]);s.directive("tagsInput",["$timeout","$document","tagsInputConfig",function(s,u,l){function c(t,e){var i,o,r,s={};return i=function(e){return a(e[t.displayProperty])},o=function(e,n){e[t.displayProperty]=n},r=function(e){var a=i(e);return a&&a.length>=t.minLength&&a.length<=t.maxLength&&t.allowedTagsPattern.test(a)&&!n(s.items,e,t.displayProperty)},s.items=[],s.addText=function(t){var e={};return o(e,t),s.add(e)},s.add=function(n){var a=i(n);return t.replaceSpacesWithDashes&&(a=a.replace(/\s/g,"-")),o(n,a),r(n)?(s.items.push(n),e.trigger("tag-added",{$tag:n})):a&&e.trigger("invalid-tag",{$tag:n}),n},s.remove=function(t){var n=s.items.splice(t,1)[0];return e.trigger("tag-removed",{$tag:n}),n},s.removeLast=function(){var e,n=s.items.length-1;return t.enableEditingLastTag||s.selected?(s.selected=null,e=s.remove(n)):s.selected||(s.selected=s.items[n]),e},s}function g(t){return-1!==r.indexOf(t)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",onTagAdded:"&",onTagRemoved:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(e,n,a){e.events=new t,l.load("tagsInput",e,n,{type:[String,"text",g],placeholder:[String,"Add a tag"],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,o],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,o],displayProperty:[String,"text"],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1]}),e.tagList=new c(e.options,e.events),this.registerAutocomplete=function(){var t=a.find("input");return t.on("keydown",function(t){e.events.trigger("input-keydown",t)}),{addTag:function(t){return e.tagList.add(t)},focusInput:function(){t[0].focus()},getTags:function(){return e.tags},getCurrentTagText:function(){return e.newTag.text},getOptions:function(){return e.options},on:function(t,n){return e.events.on(t,n),this}}}}],link:function(t,n,o,r){var l,c=[i.enter,i.comma,i.space,i.backspace],g=t.tagList,d=t.events,p=t.options,f=n.find("input"),m=["minTags","maxTags","allowLeftoverText"];l=function(){r.$setValidity("maxTags",t.tags.length<=p.maxTags),r.$setValidity("minTags",t.tags.length>=p.minTags),r.$setValidity("leftoverText",p.allowLeftoverText?!0:!t.newTag.text)},d.on("tag-added",t.onTagAdded).on("tag-removed",t.onTagRemoved).on("tag-added",function(){t.newTag.text=""}).on("tag-added tag-removed",function(){r.$setViewValue(t.tags)}).on("invalid-tag",function(){t.newTag.invalid=!0}).on("input-change",function(){g.selected=null,t.newTag.invalid=null}).on("input-focus",function(){r.$setValidity("leftoverText",!0)}).on("input-blur",function(){p.addFromAutocompleteOnly||(p.addOnBlur&&g.addText(t.newTag.text),l())}).on("option-change",function(t){-1!==m.indexOf(t.name)&&l()}),t.newTag={text:"",invalid:null},t.getDisplayText=function(t){return a(t[p.displayProperty])},t.track=function(t){return t[p.displayProperty]},t.newTagChange=function(){d.trigger("input-change",t.newTag.text)},t.$watch("tags",function(n){t.tags=e(n,p.displayProperty),g.items=t.tags}),t.$watch("tags.length",function(){l()}),f.on("keydown",function(e){if(!e.isImmediatePropagationStopped||!e.isImmediatePropagationStopped()){var n,a,o=e.keyCode,r=e.shiftKey||e.altKey||e.ctrlKey||e.metaKey,s={};if(!r&&-1!==c.indexOf(o))if(s[i.enter]=p.addOnEnter,s[i.comma]=p.addOnComma,s[i.space]=p.addOnSpace,n=!p.addFromAutocompleteOnly&&s[o],a=!n&&o===i.backspace&&0===t.newTag.text.length,n)g.addText(t.newTag.text),t.$apply(),e.preventDefault();else if(a){var u=g.removeLast();u&&p.enableEditingLastTag&&(t.newTag.text=u[p.displayProperty]),t.$apply(),e.preventDefault()}}}).on("focus",function(){t.hasFocus||(t.hasFocus=!0,d.trigger("input-focus"),t.$apply())}).on("blur",function(){s(function(){var e=u.prop("activeElement"),a=e===f[0],i=n[0].contains(e);(a||!i)&&(t.hasFocus=!1,d.trigger("input-blur"))})}),n.find("div").on("click",function(){f[0].focus()})}}}]),s.directive("autoComplete",["$document","$timeout","$sce","tagsInputConfig",function(t,o,r,s){function u(t,a){var i,r,s,u={};return r=function(t,e){return t.filter(function(t){return!n(e,t,a.tagsInput.displayProperty)})},u.reset=function(){s=null,u.items=[],u.visible=!1,u.index=-1,u.selected=null,u.query=null,o.cancel(i)},u.show=function(){u.selected=null,u.visible=!0},u.load=function(n,l){o.cancel(i),i=o(function(){u.query=n;var i=t({$query:n});s=i,i.then(function(t){i===s&&(t=e(t.data||t,a.tagsInput.displayProperty),t=r(t,l),u.items=t.slice(0,a.maxResultsToShow),u.items.length>0?u.show():u.reset())})},a.debounceDelay,!1)},u.selectNext=function(){u.select(++u.index)},u.selectPrior=function(){u.select(--u.index)},u.select=function(t){0>t?t=u.items.length-1:t>=u.items.length&&(t=0),u.index=t,u.selected=u.items[t]},u.reset(),u}return{restrict:"E",require:"^tagsInput",scope:{source:"&"},templateUrl:"ngTagsInput/auto-complete.html",link:function(t,e,n,o){var r,l,c,g,d,p,f,m,h=[i.enter,i.tab,i.escape,i.up,i.down];s.load("autoComplete",t,n,{debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1]}),c=t.options,l=o.registerAutocomplete(),c.tagsInput=l.getOptions(),r=new u(t.source,c),g=function(t){return t[c.tagsInput.displayProperty]},d=function(t){return a(g(t))},m=function(t){return a(t.email)},f=function(t){return t.name&&""!==t.name?a(t.name):void 0},p=function(t){return t&&t.length>=c.minLength||!t&&c.loadOnEmpty},t.suggestionList=r,t.addSuggestionByIndex=function(e){r.select(e),t.addSuggestion()},t.addSuggestion=function(){var t=!1;return r.selected&&(l.addTag(r.selected),r.reset(),l.focusInput(),t=!0),t},t.highlight=function(t){var e='<div class="header-user-container">  <div class="header-user">    <div class= "header-user-content">      <div>        <span class="header-user-name">'+t.name+'</span>      </div>      <div class="header-user-status">        <span>'+t.owner+"</span>      </div>    </div>  </div></div>";return e},t.track=function(t){return g(t)},l.on("tag-added tag-removed invalid-tag input-blur",function(){r.reset()}).on("input-change",function(t){p(t)?r.load(t,l.getTags()):r.reset()}).on("input-focus",function(){var t=l.getCurrentTagText();c.loadOnFocus&&p(t)&&r.load(t,l.getTags())}).on("input-keydown",function(e){var n=!1;e.stopImmediatePropagation=function(){n=!0,e.stopPropagation()},e.isImmediatePropagationStopped=function(){return n};var a=e.keyCode,o=!1;-1!==h.indexOf(a)&&(r.visible?a===i.down?(r.selectNext(),o=!0):a===i.up?(r.selectPrior(),o=!0):a===i.escape?(r.reset(),o=!0):(a===i.enter||a===i.tab)&&(o=t.addSuggestion()):a===i.down&&t.options.loadOnDownArrow&&(r.load(l.getCurrentTagText(),l.getTags()),o=!0),o&&(e.preventDefault(),e.stopImmediatePropagation(),t.$apply()))})}}}]),s.directive("tiTranscludeAppend",function(){return function(t,e,n,a,i){i(function(t){e.append(t)})}}),s.directive("tiAutosize",["tagsInputConfig",function(t){return{restrict:"A",require:"ngModel",link:function(e,n,a,i){var o,r,s=t.getTextAutosizeThreshold();o=angular.element('<span class="input"></span>'),o.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),n.parent().append(o),r=function(t){var e,i=t;return angular.isString(i)&&0===i.length&&(i=a.placeholder),i&&(o.text(i),o.css("display",""),e=o.prop("offsetWidth"),o.css("display","none")),n.css("width",e?e+s+"px":""),t},i.$parsers.unshift(r),i.$formatters.unshift(r),a.$observe("placeholder",function(t){i.$modelValue||r(t)})}}}]),s.directive("tiBindAttrs",function(){return function(t,e,n){t.$watch(n.tiBindAttrs,function(t){angular.forEach(t,function(t,e){n.$set(e,t)})},!0)}}),s.provider("tagsInputConfig",function(){var t={},e={},n=3;this.setDefaults=function(e,n){return t[e]=n,this},this.setActiveInterpolation=function(t,n){return e[t]=n,this},this.setTextAutosizeThreshold=function(t){return n=t,this},this.$get=["$interpolate",function(a){var i={};return i[String]=function(t){return t},i[Number]=function(t){return parseInt(t,10)},i[Boolean]=function(t){return"true"===t.toLowerCase()},i[RegExp]=function(t){return new RegExp(t,"i")},{load:function(n,o,r,s){var u=function(){return!0};o.options={},angular.forEach(s,function(s,l){var c,g,d,p,f,m;c=s[0],g=s[1],d=s[2]||u,p=i[c],f=function(){var e=t[n]&&t[n][l];return angular.isDefined(e)?e:g},m=function(t){o.options[l]=t&&d(t)?p(t):f()},e[n]&&e[n][l]?r.$observe(l,function(t){m(t),o.events.trigger("option-change",{name:l,newValue:t})}):m(r[l]&&a(r[l])(o.$parent))})},getTextAutosizeThreshold:function(){return n}}}]}),s.run(["$templateCache",function(t){t.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ti-transclude-append=""><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{ selected: tag == tagList.selected }"><span ng-bind="getDisplayText(tag)"></span> <a class="remove-button" ng-click="tagList.remove($index)" ng-bind="options.removeTagSymbol"></a></li></ul><input class="input" ng-model="newTag.text" ng-change="newTagChange()" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex}" ti-autosize=""></div></div>'),t.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-show="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" test-pic="{{item.userpic}}" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)" ng-bind-html="highlight(item)"></li></ul></div>')}])}();